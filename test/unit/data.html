<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <title>clay - 单元测试 - data/datum</title>
    <link rel="shortcut icon" href="../../clay.png" type="image/x-png">
    <script src="../../build/clay-core.min.js"></script>
    <script src="../libs/qunit.js"></script>
    <script src="./data.js"></script>
</head>

<body>
    <ul>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <ol class='one'>
        <li></li>
        <li></li>
    </ol>
    <ol class='two'>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ol>
    <ol class='one2'>
        <li></li>
        <li></li>
    </ol>
    <ol class='two2'>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ol>
</body>

<script>
    // 把数据绑定到一组结点

    $$('ul').find('li').datum('datum_test')
        .eq(2).datum('datum_test', function (data) {
            return data + "_update";
        });

    // 把一组数据绑定到一组结点

    var oneNodes = $$('ol.one').find('li').data([1, 2, 3]);
    var twoNodes = $$('ol.two').find('li').data([1, 2, 3]);
    var one2Nodes = $$('ol.one2').find('li').data([1, 2, 3]);
    var two2Nodes = $$('ol.two2').find('li').data([1, 2, 3]);

    // 数据不足，补入结点
    oneNodes.enter('<li name="enter"></li>').appendTo($$('ol.one'));
    // 结点过剩，删除结点
    twoNodes.exit().remove();

    // 数据不足，删除结点
    one2Nodes.exit().remove();

    // 结点过剩，补入结点
    two2Nodes.enter('<li name="enter"></li>').appendTo($$('ol.two'));

    // 属性值设置
    $$('ol.one').find('li').attr('val', function (data, index) {
        return data + "_" + index;
    });
</script>

</html>
